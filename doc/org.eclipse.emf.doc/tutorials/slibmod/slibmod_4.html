<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en"><html><head>
    
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

    
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
  <title>Generating an Extended EMF Model: Modifying the Editor</title>
</head><body>

    
<h2>Generating an Extended EMF Model</h2>


    <a href="slibmod_main.html">Top</a>&nbsp;&nbsp;&nbsp;
    <a href="slibmod_3.html">Previous: Running the Generated Editor</a>
      &nbsp;&nbsp;&nbsp;
    <a href="slibmod_5.html">Next: An Alternative Way of Generating the Model and Editor</a>
<hr>

    
<h3>Step 4: Modifying the Editor</h3>


    
<p>This part of the tutorial will show you how you can change the label in the generated editor in a number of ways.
      </p>

<p>Quit the run-time workbench instance and go back to the Resource perspective
of the original Eclipse workbench with the "schoollibrary" genmodel.    
  </p>


    

    
<ul>


      <li>Select the "SchoolLibrary" item. In the Properties view, change
the "Label Feature" property to the attribute "location". This will cause
the value of the "location" attribute (instead of the "name" attribute) to
be displayed as the label to SchoolLibrary objects in the editor. The default
attribute to use for this value is the attribute named "name" (or one that
ends with "name") if it exists.<br>
    <br>
    <img src="sl401.gif" alt="" width="390" height="303">

<br>
        &nbsp;
        &nbsp;</li>

      <li>&nbsp;To have the change
take effect, we don't have to re-generate all the classes. All we need to
regenerate is the provider class related to "SchoolLibrary", so we can simply
right-click on "SchoolLibrary" and select "Generate Edit Code". There is also
no harm in re-generating all the classes. However, it takes longer.<br>
    <br>
    <img src="sl402.gif" alt="" width="253" height="309">
<br>
    <br>
</li>
    

      <li>You can examine the timestamps on the generated files
to satisfy yourself that indeed only "SchoolLibraryItemProvider.java" was
re-generated. The following table summarizes the files that will be generated 
with the "Generate Model Code", "Generate Edit Code" and "Generate Editor Code" menu
items when you right-click on the different objects. The "Generate All" menu
item is equivalent to selecting the three menu items together.<br>
    <br>
    <table cellpadding="2" cellspacing="2" border="1" width="100%">
      <tbody>
        <tr>
          <td valign="top"><br>
          </td>
          <td valign="top">Generate Model Code<br>
          </td>
          <td valign="top">Generate Edit Code<br>
          </td>
          <td valign="top">Generate Editor Code<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Model &lt;M&gt;<br>
          </td>
          <td valign="top">plugin.xml<br>
&lt;M&gt;Plugin.java<br>
(and files associated with each package in the model)<br>
          </td>
          <td valign="top">plugin.xml<br>
plugin.properties<br>
&lt;M&gt;EditPlugin.java<br>
(and files associated with each package in the model)<br>
          </td>
          <td valign="top">plugin.xml<br>

plugin.properties<br>

&lt;M&gt;EditorPlugin.java<br>

(and files associated with each package in the model)<br>
          </td>
        </tr>
        <tr>
          <td valign="top">Package &lt;P&gt;<br>
          </td>
          <td valign="top">&lt;P&gt;Package.java<br>

&lt;P&gt;PackageImpl.java<br>

&lt;P&gt;Factory.java<br>

&lt;P&gt;FactoryImpl.java<br>

&lt;P&gt;Switch.java<br>

&lt;P&gt;AdaptorFactory.java<br>

&lt;P&gt;ResourceImpl.java<br>

&lt;P&gt;ResourceFactory.java<br>

(and files associated with each Class and Enum in the package)<br>
          </td>
          <td valign="top">&lt;P&gt;ItemProviderAdaptorFactory.java<br>
(and files associated with each Class in the package)<br>
          </td>
          <td valign="top">&lt;P&gt;Editor.java<br>
&lt;P&gt;ModelWizard.java<br>
&lt;P&gt;ActionBarContributor.java<br>
          <br>
          </td>
        </tr>
        <tr>
          <td valign="top">Class &lt;C&gt;<br>
          </td>
          <td valign="top">&lt;C&gt;.java<br>
&lt;C&gt;Impl.java<br>
          </td>
          <td valign="top">&lt;C&gt;ItemProvider.java<br>
          </td>
          <td valign="top"><br>
          </td>
        </tr>
        <tr>
          <td valign="top">Enum &lt;E&gt;<br>
          </td>
          <td valign="top">&lt;E&gt;.java<br>
          </td>
          <td valign="top"><br>
          </td>
          <td valign="top"><br>
          </td>
        </tr>
      </tbody>
    </table>
    <br>
</li><li>Now you can switch to the Debug perspective and launch the run-time workbench
instance again. Open the "My.schoollibrary" resource again if it was closed before. Expand the GenModel and select
the "School Library" object. You can see that the location of the school library is shown in the
label instead of its name.<br>
    <img src="sl403.gif" alt="" width="428" height="277">
<br>
        &nbsp;

        &nbsp;</li>

    
</ul>

      
    

    

    
<ul>

      

      

      
    <li>Suppose that now you don't like the prefix "School Library" in the label and want
to get rid of it. The only way to do this is to edit the code, but it
is still quite simple to do. All the values of the various properties that are displayed are
supplied to the UI code through the Item Providers. For text labels, they are
supplied through the "getText()" method in the Item Provider.<br>
    <br>
</li><li>Expand the "schoollibrary.edit" project, locate the "SchoolLibraryItemProvider.java" file, and then open it.<br>
    <img src="sl404.gif" alt="" width="353" height="378">
    <br>
    <br>
  </li>
<li>Locate the "getText()" method in the Outline view and select it.<br>
        <img src="sl405.gif" alt="" width="395" height="242">


        <br>&nbsp;&nbsp;
        &nbsp;&nbsp;</li>

      <li> The cursor in the main window will then move to that method.<br>
    <img src="sl406.gif" alt="" width="593" height="200">
&nbsp;<br>&nbsp;
      </li>

      <li>Remove the string "School Library"
in the return statement. In order not to lose the change when the code is
re-generated, the "<font face="Courier New, Courier, monospace">@generated</font>" tag needs to be removed as well.<br>
        <img src="sl407.gif" alt="" width="593" height="193">


        <br>&nbsp;
      </li>

      

      

      

      <li>Save
the change, switch to the Debug perspective, launch the run-time workbench
instance and open "My.schoollibrary". You can see the label for School Library now contains
just the value of the "location" attribute.<br>
        <img src="sl408.gif" alt="" width="404" height="280">
&nbsp;&nbsp;<br>
    <br>
</li><li>In the above step, we have changed the original getText() method. The
"Label Feature" property on the "School Library" object in the "schoollibrary.genmodel"
now has no effect on the generated code. This is because we have removed the "<font face="Courier New, Courier, monospace">@generated</font>" tag, preventing it from being overwritten during code generation.<br>
    <br>
  </li>
  <li>Suppose
that now you have not yet decided whether your School Library editor will 
display the value of the location attribute or the value of the name attribute.
Instead, you want to be able to change it from the .genmodel "Label Feature"
attribute later. However, you do not want the prefix "School Library" displayed
in the editor. Can this be achieved?<br>
    <br>
It can, but you need to write a little bit more code. Rename the "<font face="Courier New, Courier, monospace">getText()</font>" method
to "<font face="Courier New, Courier, monospace">getTextGen()</font>" (and keep the <font face="Courier New, Courier, monospace">@generated</font> tag) and create a "<font face="Courier New, Courier, monospace">getText()</font>" method
that will manipulate the string returned by "<font face="Courier New, Courier, monospace">getTextGen()</font>" as follows:<br>
    <br>
    <img src="sl409.gif" alt="" width="750" height="190">

    <br>
    <br>
This is a feature of the codegen: When a method it is going to generate already
exists and does not have the "<font face="Courier New, Courier, monospace">@generated</font>" tag, it will look for a method with
the same name plus the suffix "<font face="Courier New, Courier, monospace">Gen</font>". If the method exists and is tagged with "<font face="Courier New, Courier, monospace">@generated</font>", the
content will be generated into this method.<br>
    <br>
  </li>
  <li>To show you that the method is really re-generated, remove the method body of <font face="Courier New, Courier, monospace">getTextGen()</font>. Eclipse will give an error because it expects a return statement.
Don't worry about the error.<br>
    <br>
  </li>
  <li>Save the "SchoolLibraryItemProvider.java" file.<br>
    <img src="sl410.gif" alt="" width="317" height="185">
    <br>
    <br>
  </li>
  <li>Switch back to "schoollibrary.genmodel", select "SchoolLibrary", and re-generate Edit code:<br>
    <br>
    <img src="sl411.gif" alt="" width="360" height="360">
    <br>
    <br>
  </li>
  <li>Now, switch back to the "<font face="Courier New, Courier, monospace">getTextGen()</font>" method in "SchoolLibraryItemProvider.java". It now has content and the error message is gone.<br>
    <br>
    <img src="sl412.gif" alt="" width="750" height="230">

    <br>
    <br>
  </li>
  <li>You can go back to the "School Library" object in "schoollibrary.genmodel"
and change the "Label Feature" property, &nbsp;regenerate the code and verify
that the generated code does indeed change according to the "Label Feature"
property.       </li>

    
</ul>


    
<hr>
    <a href="slibmod_main.html">Top</a>&nbsp;&nbsp;&nbsp;
    <a href="slibmod_3.html">Previous: &nbsp;Running the Generated Editor</a>
      &nbsp;&nbsp;&nbsp;&nbsp;<a href="slibmod_5.html">Next: An Alternative Way of Generating the Model and the Editor</a>
  <br>

<br>

<br>

<br>

<br>

<br>

</body></html>