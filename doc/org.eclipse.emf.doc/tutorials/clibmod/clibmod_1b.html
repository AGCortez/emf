<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>Generating an EMF Model: Define Using Java</title>
  </head>
  <body>

    <h2>Generating an EMF Model</h2>

    <a href="clibmod_main.html">Top</a>&nbsp;&nbsp;&nbsp;
    <a href="clibmod_0.html">Previous: Prerequisites</a>&nbsp;&nbsp;&nbsp;
    <a href="clibmod_2.html">Next: Generate the Model Code</a>
    <hr>

    <h3>Step 1b: Define the Model Using Annotated Java</h3>

    <p>Instead of importing the model from a Rose diagram, we can start with
    a set of Java interfaces and classes that correspond to the classes and
    enumerated types, respectively, in the library model.  This code is the
    bare minimum required to illustrate the desired features.  Based on it, an
    Ecore model and a GenModel will be constructed, which will then drive
    generation of the remaining code.  The code is annotated with "@model"
    tags in javadoc comments, in order to specify any non-default values for
    the attributes and references of the Ecore objects.</p>

    <blockquote>
      <b><a href="Library.java">Library.java</a></b><br>
      <table border="1" frame="box"><tr><td>
<pre><tt><font color="#000000">package org.eclipse.example.library;

import java.util.List;

/**
 * </font><font color="#3333ff">@model
</font><font color="#000000"> */
public interface </font><font color="#009900">Library
</font><font color="#000000">{
  /**
   * </font><font color="#3333ff">@model type="Book" containment="true"
</font><font color="#000000">   */
</font><font color="#ff0000">  List getBooks();

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model type="Writer" containment="true"
</font><font color="#000000">   */
</font><font color="#ff0000">  List getWriters();

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model
</font><font color="#000000">   */
</font><font color="#ff0000">  String getName();
</font><font color="#000000">}</font></tt></pre>
      </td></tr></table>
    </blockquote>

    <blockquote>
      <b><a href="Book.java">Book.java</a></b><br>
      <table border="1" frame="box"><tr><td>
<pre><tt><font color="#000000">package org.eclipse.example.library;

/**
 * </font><font color="#3333ff">@model
</font><font color="#000000"> */
public interface </font><font color="#009900">Book
</font><font color="#000000">{
  /**
   * </font><font color="#3333ff">@model
</font><font color="#000000">   */
</font><font color="#ff0000">  String getTitle();

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model default="100"
</font><font color="#000000">   */
</font><font color="#ff0000">  int getPages();

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model opposite="books"
</font><font color="#000000">   */
</font><font color="#ff0000">  Writer getAuthor()</font><font color="#000000">;

  /**
   * </font><font color="#3333ff">@model
</font><font color="#000000">   */
</font><font color="#ff0000">  BookCategory getCategory();
</font><font color="#000000">}</font></tt></pre>
      </td></tr></table>
    </blockquote>

    <blockquote>
      <b><a href="Writer.java">Writer.java</a></b><br>
      <table border="1" frame="box"><tr><td>
<pre><tt><font color="#000000">package org.eclipse.example.library;

/**
 * </font><font color="#3333ff">@model
</font><font color="#000000"> */
public interface </font><font color="#009900">Writer
</font><font color="#000000">{
  /**
   * </font><font color="#3333ff">@model
</font><font color="#000000">   */
</font><font color="#ff0000">  String getName();

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model type="Book" opposite="author"
</font><font color="#000000">   */
</font><font color="#ff0000">  java.util.List getBooks();
</font><font color="#000000">}</font></tt></pre>
      </td></tr></table>
    </blockquote>

    <blockquote>
      <b><a href="BookCategory.java">BookCategory.java</a></b><br>
      <table border="1" frame="box"><tr><td>
<pre><tt><font color="#000000">package org.eclipse.example.library;
/**
 * </font><font color="#3333ff">@model
</font><font color="#000000"> */
public class </font><font color="#009900">BookCategory
</font><font color="#000000">{
  /**
   * </font><font color="#3333ff">@model name="Mystery"
</font><font color="#000000">   */
</font><font color="#ff0000">  public static final int MYSTERY = 0;

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model name="ScienceFiction"
</font><font color="#000000">   */
</font><font color="#ff0000">  public static final int SCIENCE_FICTION = 1;

</font><font color="#000000">  /**
   * </font><font color="#3333ff">@model name="Biography"
</font><font color="#000000">   */
</font><font color="#ff0000">  public static final int BIOGRAPHY = 2;
</font><font color="#000000">}</font></tt></pre>
      </td></tr></table>
    </blockquote>

    <p>Create a new Java project in the workspace:</p>

    <ul>
      <li>
        Bring up the "File/New/Project..." dialog.
        <br>
        <img src="cg101.gif" alt="File/New/Project..." height="55" width="341">
        <br>&nbsp;
      </li>

      <li>
        Select "Java" and "Java Project".  Click the "Next" button.
        <br>
        <img src="cg102.gif" alt="Java Project" height="182" width="359">
        <br>&nbsp;
      </li>

      <li>
        Give the project a name, say, "library".  Then, click the "Next"
        button.
        <br>
        <img src="cg103.gif" alt="Name the project" height="221" width="302">
        <br>&nbsp;
      </li>

      <li>
        Click the "Add Folder" button.
        <br>
        <img src="cg104.gif" alt="Add folder" height="225"
          width="499">
        <br>&nbsp;
      </li>

      <li>
        Click the "Create New Folder" button.
        <br>
        <img src="cg104_1.gif" alt="Create a new folder" height="422"
          width="346">
        <br>&nbsp;
      </li>

      <li>
        Type "src" and click the "OK" button.
        <br>
        <img src="cg105.gif" alt="Name the folder" height="164" width="300">
        <br>&nbsp;
      </li>

      <li>
        Click the "OK" button.
        <br>
        <img src="cg105_1.gif" alt="Done with new folder" height="422" width="346">
        <br>&nbsp;
      </li>

      <li>
        When asked if you want to remove the project as source folder and update the 
	build output folder to "library/bin", click the "Yes" button.
        <br>
        <img src="cg106.gif" alt="Do not update build output folder"
          height="139" width="441">
        <br>&nbsp;
      </li>

      <li>
        Specify "library/runtime" as the build default output folder.  Click the 
        "Finish" button.
        <br>
        <img src="cg107.gif" alt="Specify build output folder" height="500"
          width="500">
        <br>&nbsp;
      </li>

      <li>
        The newly created Java project can be seen in the Package Explorer.
        <br>
        <img src="cg108.gif" alt="Library Java project" height="117"
          width="280">
        <br>&nbsp;
      </li>
    </ul>

    <p>Create the first Java interface:
 
    <ul>
      <li>
        Right-click the "src" folder and select "New/Interface" from the pop-up
        menu.
        <br>
        <img src="cg109.gif" alt="New/Interface" height="152" width="402">
        <br>&nbsp;
      </li>

      <li>
        Fill in the package and interface name.  Click the "Finish" button.
        <br>
        <img src="cg110.gif" alt="Create new interface" height="460"
          width="500">
        <br>&nbsp;
      </li>

      <li>
        A new Java interface file is created and opened in the main view.
        <br>
        <img src="cg111.gif" alt="Opened interface" height="200" width="506">
        <br>&nbsp;
      </li>

      <li>
        Type (or paste) in the interface code, as shown earlier in this
        section.  Pay special attention to the "@model" tags.
        <br>
        <img src="cg112.gif" alt="Enter interface code" height="355"
          width="412">
        <br>&nbsp;
      </li>

      <li>
        Select "Save" from the "File" menu to save library.java file.
        <br>
        <img src="cg113.gif" alt="File/Save" height="190"
          width="280">
        <br>&nbsp;
      </li>
    </ul>

    <p>Create the other two interfaces and the class in the same way.  Of
    course, to create the class, select "New/Class" from the pop-up menu,
    instead of "New/Interface".</p>

    <p>Create the GenModel:</p>

    <ul>
      <li>
        In the Package Explorer view, right-click the "src" folder and select
        "New/Other..." from the pop-up menu.
        <br>
        <img src="cg115.gif" alt="New/Other..." height="250" width="401">
        <br>&nbsp;
      </li>

      <li>
        Select "Eclipse Modeling Framework" and "EMF Models".  Click the "Next"
        button.
        <br>
        <img src="cg116.gif" alt="New/Other..." height="200" width="400">
        <br>&nbsp;
      </li>

      <li>
        Change the folder to "library/src/model".
        <br>
        <img src="cg117.gif" alt="Change the folder" height="220" width="400">
        <br>&nbsp;
      </li>

      <li>
        Change the file name to "library.genmodel" and click the "Next" button.
        <br>
        <img src="cg118.gif" alt="Change the file name" height="135"
          width="350">
        <br>&nbsp;
      </li>

      <li>
        Select "Load from Java annotations" and click the "Next" button.
        <br>
        <img src="cg119.gif" alt="Load from Java annotations" height="210"
          width="259">
        <br>&nbsp;
      </li>

      <li>
        Select library package and click the "Finish" button.
        <br>
        <img src="cg119_1.gif" alt="Check library" height="570"
          width="500">
        <br>&nbsp;
      </li>

      <li>
        An Ecore model and a GenModel will be created.  The GenModel, which
        controls code generation for the model, is opened in the main view.
        <br>
        <img src="cg120.gif" alt="Opened GenModel" height="225" width="400">
        <br>&nbsp;
      </li>
    </ul>

    <hr>
    <a href="clibmod_main.html">Top</a>&nbsp;&nbsp;&nbsp;
    <a href="clibmod_0.html">Previous: Prerequisites</a>&nbsp;&nbsp;&nbsp;
    <a href="clibmod_2.html">Next: Generate the Model Code</a>
  </body>
</html>
