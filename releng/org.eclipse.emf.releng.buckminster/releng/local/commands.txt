#importproxysettings

setpref complianceLevel=1.5
setpref targetPlatformPath="${WORKSPACE}/buildroot/target.platform"
setpref org.eclipse.buckminster.core.maxParallelResolutions=1

# Import all but rap.sdk cause it has a bad dependency to eclipse 3.8
import --properties "${releng.proj.loc}/releng/local/local-build.properties" -Dbuild.type=${BUILD_TYPE} -Dwithout.gdt=true  -Dwithout.rap=true "${releng.proj.loc}/releng/emf-all.mspec"
import --properties "${releng.proj.loc}/releng/local/local-build.properties" -Dbuild.type=${BUILD_TYPE} -Dwithout.gdt=true "${releng.proj.loc}/releng/emf-platform.base.sources.cquery"
build

# Freeze galileo target platform information 
perform --properties "${releng.proj.loc}/releng/local/local-build.properties" "org.eclipse.emf.all#jar.contents"
perform --properties "${releng.proj.loc}/releng/local/local-build.properties" "org.eclipse.emf.gwt.sdk#jar.contents"

# Import rap.sdk now, eclipse 3.8 will be imported in the TP too
import --properties "${releng.proj.loc}/releng/local/local-build.properties" -Dbuild.type=${BUILD_TYPE} -Dwithout.gdt=true "${releng.proj.loc}/releng/rap/emf.rap.mspec"
build

# Package all together
perform --properties "${releng.proj.loc}/releng/local/local-build.properties" "org.eclipse.emf.build#build"
perform --properties "${releng.proj.loc}/releng/local/local-build.properties" "org.eclipse.emf.releng.buckminster#setup.promoter"
