<!-- ===================================================================== -->
<!-- Custom targets called from a project's generated build.xml            -->
<!-- Set customBuildCallbacks=<path/to/this/file> in your build.properties.-->
<!-- ===================================================================== -->
<project name="Build specific targets and properties" default="noDefault">

	<!-- ===================================================================== -->
	<!-- Default target                                                        -->
	<!-- ===================================================================== -->
	<target name="noDefault">
		<echo message="This file must be called with explicit targets" />
	</target>
	
	<!-- ===================================================================== -->
	<!-- Steps to do before the target build.jars                              -->
	<!-- Available parameters :                                                -->
	<!--   build.result.folder - folder to contain the build results           -->
	<!-- ===================================================================== -->
	
	<property name="exampleCVSTag" value="HEAD" />
	
	<target name="pre.build.jars">
		<echo message="exampleCVSTag=${exampleCVSTag}}"/>
		<echo message="build.result.folder=${build.result.folder}}"/>
			
		<cvs 
			failonerror="true" 
			dest="${build.result.folder}/examples"
			cvsroot=":pserver:anonymous@dev.eclipse.org:/cvsroot/modeling">
			<commandline>
				<argument line="export -r ${exampleCVSTag} org.eclipse.emf/org.eclipse.emf/examples"/>
			</commandline>
		</cvs>
		
		<move todir="${build.result.folder}/examples/" includeemptydirs="true">
	    <fileset dir="${build.result.folder}/examples/org.eclipse.emf/org.eclipse.emf/examples/">
	      <exclude name="**/.cvsignore"/>
	    </fileset>			
		</move>
		
		<delete dir="${build.result.folder}/examples/org.eclipse.emf"/>
		<delete dir="${build.result.folder}/examples/org.eclipse.emf.examples"/>
		<delete dir="${build.result.folder}/examples/org.eclipse.emf.examples-feature"/>
	</target>
</project>
